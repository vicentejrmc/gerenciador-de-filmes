import{$ as A,B as d,E as b,R as g,S as v,T as f,Y as m,_ as M,a as r,b as o,f as n,o as h,r as u,ra as R,wa as _,za as I}from"./chunk-UV2O3WZ6.js";var l=(e=>(e.Filme="filme",e.Tv="tv",e))(l||{});var w={production:!0,apiKey:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5ZTBkYjNkNDVhYmExZTJjODY4Mzg3Y2U3Njk4NjM0OCIsIm5iZiI6MTc2MDAxMzUxNy42MDQsInN1YiI6IjY4ZTdhY2NkYzcwYmIwYWU1YzVmNjNiYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.p5F-vHLtE7OF5mB_ZJ5yiNasvIbM9nouDeHf7FuAwJs"};function y(s){if(!Object.values(l).includes(s))throw new Error('Valor de enum "TipoMidia" inv\xE1lido.');return s==="filme"?"movie":"tv"}var B=class s{http=u(_);urlBase="https://api.themoviedb.org/3";domSanitizer=u(I);selecionarMidiasPopulares(t){let e=this.converterTipoParaApi(t),i=`${this.urlBase}/${e}/popular?language=pt-BR`;return this.buscarMidias(i,t)}selecionarMidiasMaisVotadas(t){let e=this.converterTipoParaApi(t),i=`${this.urlBase}/${e}/top_rated?language=pt-BR`;return this.buscarMidias(i,t)}selecionarFilmesEmCartaz(){let t=`${this.urlBase}/movie/now_playing?language=pt-BR`;return this.buscarMidias(t,"filme")}buscarDetalhesMidia(t,e){let i=t==="filme"?"movie":"tv",a=`${this.urlBase}/${i}/${e}?language=pt-BR`;return this.http.get(a,this.getAuthHeaders()).pipe(n(p=>o(r({},p),{media_type:t,vote_average:p.vote_average*10,poster_path:p.poster_path?"https://image.tmdb.org/t/p/w500"+p.poster_path:"",backdrop_path:p.backdrop_path?"https://image.tmdb.org/t/p/original"+p.backdrop_path:""})))}buscarVideoPorId(t,e){let i=this.converterTipoParaApi(t),a=`${this.urlBase}/${i}/${e}/videos?language=pt-BR`;return this.http.get(a,this.getAuthHeaders()).pipe(n(p=>this.buscarVideosYoutube(p)))}selecionarCreditosPorId(t,e){let i=`${this.urlBase}/${y(t)}/${e}/credits?language=pt-BR`;return this.http.get(i,this.getAuthHeaders()).pipe(n(a=>this.buscarCreditosMidia(a)))}pesquisarMidia(t,e=1){let i=`https://api.themoviedb.org/3/search/multi?query=${t}&page=${e}&language=pt-BR`;return this.http.get(i,this.getAuthHeaders()).pipe(n(a=>this.resultPesquisarMidias(a)))}resultPesquisarMidias(t){return o(r({},t),{results:t.results.map(e=>o(r({},e),{media_type:e.media_type.toString()==="movie"?"filme":"tv",poster_path:"https://image.tmdb.org/t/p/w500"+e.poster_path,backdrop_path:"https://image.tmdb.org/t/p/original"+e.backdrop_path}))})}buscarMidias(t,e){return this.http.get(t,this.getAuthHeaders()).pipe(n(i=>o(r({},i),{media_type:e,results:i.results.map(a=>o(r({},a),{poster_path:"https://image.tmdb.org/t/p/w500"+a.poster_path,backdrop_path:"https://image.tmdb.org/t/p/original"+a.backdrop_path}))})))}converterTipoParaApi(t){return t==="filme"?"movie":"tv"}getAuthHeaders(){return{headers:{Authorization:w.apiKey}}}buscarVideosYoutube(t){return o(r({},t),{results:t.results.filter(e=>e.site.toLowerCase()==="youtube").map(e=>o(r({},e),{key:this.domSanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+e.key)}))})}buscarCreditosMidia(t){return o(r({},t),{cast:t.cast.map(e=>o(r({},e),{profile_path:e.profile_path?"https://image.tmdb.org/t/p/w300/"+e.profile_path:"/img/placeholder-person.webp"})),crew:t.crew.map(e=>o(r({},e),{profile_path:e.profile_path?"https://image.tmdb.org/t/p/w300/"+e.profile_path:"/img/placeholder-person.webp"}))})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"})};var c={muito_baixa:40,baixa:60,media:75,alta:100},T=class s{avaliacao=0;tamanhoPx=40;get porcentagemAvaliacao(){let t=Number(this.avaliacao)||0,e;return t>0&&t<=1?e=t*100:t>1&&t<=10?e=t*10:e=t,e=Math.round(Math.max(0,Math.min(100,e))),e}mapearCorDaNota(t){return t<=c.muito_baixa?"app-borda-nota-mais-baixa":t<=c.baixa?"app-borda-nota-baixa":t<=c.media?"app-borda-nota-media":"app-borda-nota-alta"}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=b({type:s,selectors:[["app-icone-avaliacao"]],inputs:{avaliacao:"avaliacao",tamanhoPx:"tamanhoPx"},decls:4,vars:8,consts:[[1,"d-flex","justify-content-center","align-items-center","rounded-circle","app-porcentagem-nota",3,"ngClass"],[1,"app-valor-porcentagem","fw-semibold"]],template:function(e,i){e&1&&(v(0,"span",0)(1,"span",1)(2,"span"),M(3),f()()()),e&2&&(m("width",i.tamanhoPx+"px")("height",i.tamanhoPx+"px"),g("ngClass",i.mapearCorDaNota(i.porcentagemAvaliacao)),d(),m("font-size",i.tamanhoPx/2.4+"px"),d(2),A(i.porcentagemAvaliacao))},dependencies:[R],encapsulation:2})};export{l as a,B as b,T as c};
